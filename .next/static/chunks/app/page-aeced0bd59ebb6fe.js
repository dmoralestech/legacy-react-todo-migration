(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3463:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>N});var s=l(5155),a=l(2115),n=l(3353),o=l(3005);let c=(0,o.eU)([]),d=(0,o.eU)(!1);(0,o.eU)(null);let i=(0,o.eU)("all"),r=(0,o.eU)(e=>{let t=e(c);switch(e(i)){case"active":return t.filter(e=>!e.completed);case"completed":return t.filter(e=>e.completed);default:return t}}),u=(0,o.eU)(e=>{let t=e(c);return{total:t.length,active:t.filter(e=>!e.completed).length,completed:t.filter(e=>e.completed).length}}),m=(0,o.eU)(null,(e,t,l)=>{let s=e(c);t(c,[...s,{id:Date.now().toString(),text:l.text,completed:!1,createdAt:new Date().toISOString()}])}),p=(0,o.eU)(null,(e,t,l)=>{let{id:s,updates:a}=l,n=e(c);t(c,n.map(e=>e.id===s?{...e,...a,updatedAt:new Date().toISOString()}:e))}),x=(0,o.eU)(null,(e,t,l)=>{let s=e(c);t(c,s.filter(e=>e.id!==l))}),h=(0,o.eU)(null,(e,t,l)=>{let s=e(c);t(c,s.map(e=>e.id===l?{...e,completed:!e.completed,updatedAt:new Date().toISOString()}:e))});(0,o.eU)(null,(e,t,l)=>{l?.todos?.todos&&t(c,l.todos.todos),l?.todos?.loading!==void 0&&t(d,l.todos.loading)});let b=e=>{let{onAdd:t}=e,[l,n]=(0,a.useState)(""),o=(0,a.useCallback)(e=>{if(e.preventDefault(),l.trim())try{t({text:l.trim()})}catch(e){console.error("Failed to add todo:",e)}n("")},[l,t]),c=(0,a.useCallback)(e=>{n(e.target.value)},[]);return(0,s.jsxs)("form",{onSubmit:o,className:"todo-form",children:[(0,s.jsx)("input",{type:"text",value:l,onChange:c,placeholder:"What needs to be done?",className:"todo-input"}),(0,s.jsx)("button",{type:"submit",className:"btn btn-add",tabIndex:0,children:"Add Todo"})]})},j=e=>{let{todo:t,onToggle:l,onUpdate:n,onDelete:o}=e,[c,d]=(0,a.useState)(!1),[i,r]=(0,a.useState)(t.text),u=(0,a.useRef)(!1);(0,a.useEffect)(()=>{r(t.text)},[t.text]);let m=(0,a.useCallback)(()=>{d(!0),r(t.text)},[t.text]),p=(0,a.useCallback)(()=>{!u.current&&i.trim()&&(n(t.id,{text:i.trim()}),d(!1))},[i,n,t.id]),x=(0,a.useCallback)(()=>{u.current=!0,d(!1),r(t.text),setTimeout(()=>{u.current=!1},10)},[t.text]),h=(0,a.useCallback)(()=>{u.current||p()},[p]),b=(0,a.useCallback)(e=>{"Enter"===e.key?p():"Escape"===e.key&&x()},[p,x]),j=(0,a.useCallback)(e=>{r(e.target.value)},[]),v=(0,a.useCallback)(()=>{l(t.id)},[l,t.id]),C=(0,a.useCallback)(()=>{o(t.id)},[o,t.id]),k=(0,a.useCallback)(()=>{u.current=!0},[]);return(0,s.jsxs)("li",{className:`todo-item ${t.completed?"completed":""}`,children:[(0,s.jsxs)("div",{className:"todo-content",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.completed,onChange:v,className:"todo-checkbox"}),c?(0,s.jsx)("input",{type:"text",value:i,onChange:j,onKeyDown:b,onBlur:h,className:"todo-edit-input",autoFocus:!0}):(0,s.jsx)("span",{className:`todo-text ${t.completed?"completed":""}`,onDoubleClick:m,children:t.text})]}),(0,s.jsxs)("div",{className:"todo-actions",children:[!c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:m,className:"btn btn-edit",children:"Edit"}),(0,s.jsx)("button",{onClick:C,className:"btn btn-delete",children:"Delete"})]}),c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:p,className:"btn btn-save",children:"Save"}),(0,s.jsx)("button",{onMouseDown:k,onClick:x,className:"btn btn-cancel",children:"Cancel"})]})]})]})},v=e=>{let{todos:t,onToggle:l,onUpdate:a,onDelete:n}=e,o=t||[];return 0===o.length?(0,s.jsx)("div",{className:"todo-list-empty",children:(0,s.jsx)("p",{children:"No todos yet. Add one above!"})}):(0,s.jsx)("ul",{className:"todo-list",children:o.map(e=>(0,s.jsx)(j,{todo:e,onToggle:l,onUpdate:a,onDelete:n},e.id))})},C=e=>{let{filter:t,onFilterChange:l,todoCount:n}=e,o=n||{active:0,total:0,completed:0},c=(0,a.useCallback)(()=>{l&&l("all")},[l]),d=(0,a.useCallback)(()=>{l&&l("active")},[l]),i=(0,a.useCallback)(()=>{l&&l("completed")},[l]);return(0,s.jsxs)("div",{className:"todo-filters",children:[(0,s.jsx)("div",{className:"todo-count",children:(0,s.jsxs)("span",{children:[o.active," of ",o.total," remaining"]})}),(0,s.jsxs)("div",{className:"filter-buttons",children:[(0,s.jsx)("button",{className:`btn ${"all"===t?"active":""}`,onClick:c,children:"All"}),(0,s.jsx)("button",{className:`btn ${"active"===t?"active":""}`,onClick:d,children:"Active"}),(0,s.jsx)("button",{className:`btn ${"completed"===t?"active":""}`,onClick:i,children:"Completed"})]})]})},k=()=>{let[e]=(0,n.fp)(r),[t,l]=(0,n.fp)(i),[a]=(0,n.fp)(u),[,o]=(0,n.fp)(m),[,c]=(0,n.fp)(p),[,d]=(0,n.fp)(x),[,j]=(0,n.fp)(h);return(0,s.jsxs)("div",{className:"todo-app",children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("h1",{children:"Modern TODO App"}),(0,s.jsx)("p",{children:"Next.js 15 + React 19 + Jotai"})]}),(0,s.jsxs)("main",{children:[(0,s.jsx)(b,{onAdd:e=>{o(e)}}),(0,s.jsxs)("div",{className:"todo-stats",children:[(0,s.jsxs)("span",{children:["Total: ",a.total]}),(0,s.jsxs)("span",{children:["Active: ",a.active]}),(0,s.jsxs)("span",{children:["Completed: ",a.completed]})]}),(0,s.jsx)(C,{filter:t,onFilterChange:e=>{l(e)},todoCount:a}),(0,s.jsx)(v,{todos:e,onToggle:e=>{j(e)},onUpdate:(e,t)=>{c({id:e,updates:t})},onDelete:e=>{d(e)}}),0===e.length&&(0,s.jsx)("div",{className:"empty-state",children:"all"===t?"No todos yet. Add one above!":`No ${t} todos.`})]})]})};function N(){return(0,s.jsx)("main",{children:(0,s.jsx)(k,{})})}},5140:(e,t,l)=>{Promise.resolve().then(l.bind(l,3463))}},e=>{e.O(0,[353,441,964,358],()=>e(e.s=5140)),_N_E=e.O()}]);